{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\Desktop\\\\New folder\\\\SplitBill\\\\client\\\\src\\\\containers\\\\AuthComponent.js\";\nimport React from 'react';\nimport { instance } from '../utils/AxiosConfig';\nimport { withRouter } from \"react-router-dom\";\nimport { userActionCreator } from \"../redux/actionCreator/userAction\";\nimport { store } from \"../redux/store\"; // import { mathActionCreator } from '../models/actionCreators/mathactioncreator';\n// import { store } from '../models/store';\n\nclass AuthComponent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      user: undefined\n    };\n  }\n\n  componentWillMount() {\n    console.log(\"first\");\n    const jwt = localStorage.getItem('jwtToken');\n\n    if (!jwt) {\n      this.props.history.push('/login');\n    }\n\n    instance.get('/getUser', {\n      headers: {\n        Authorization: \"Bearer \".concat(jwt)\n      }\n    }).then(res => {\n      console.log(\"and here Iam\");\n      console.log(res);\n      this.state.user = res.data.userdata.doc;\n      localStorage.username = res.data.userdata.doc.username;\n      var user = res.data.userdata.doc;\n      this.setState({\n        user: user\n      });\n      var action = userActionCreator(user, 'AddUser');\n      store.dispatch(action); //  var action = mathActionCreator(user,'+');\n      //  store.dispatch(action);\n    }).catch(err => {\n      localStorage.removeItem('jwtToken');\n      this.props.history.push('/login');\n    });\n  }\n\n  render() {\n    {\n      console.log(\"hello\", this.state.user);\n    }\n\n    if (this.state.user === undefined) {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, \"loading..........\"));\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, this.props.children);\n  }\n\n}\n\nexport default withRouter(AuthComponent);","map":{"version":3,"sources":["C:\\Users\\HP\\Desktop\\New folder\\SplitBill\\client\\src\\containers\\AuthComponent.js"],"names":["React","instance","withRouter","userActionCreator","store","AuthComponent","Component","constructor","props","state","user","undefined","componentWillMount","console","log","jwt","localStorage","getItem","history","push","get","headers","Authorization","then","res","data","userdata","doc","username","setState","action","dispatch","catch","err","removeItem","render","children"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,QAAR,QAAuB,sBAAvB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAAQC,iBAAR,QAAgC,mCAAhC;AACA,SAASC,KAAT,QAAsB,gBAAtB,C,CACA;AACA;;AAEC,MAAMC,aAAN,SAA4BL,KAAK,CAACM,SAAlC,CAA2C;AACxCC,EAAAA,WAAW,CAACC,KAAD,EAAO;AACd,UAAMA,KAAN;AAEA,SAAKC,KAAL,GAAa;AACTC,MAAAA,IAAI,EAAEC;AADG,KAAb;AAGH;;AACDC,EAAAA,kBAAkB,GAAG;AACjBC,IAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACH,UAAMC,GAAG,GAAGC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAZ;;AACA,QAAG,CAACF,GAAJ,EAAQ;AACJ,WAAKP,KAAL,CAAWU,OAAX,CAAmBC,IAAnB,CAAwB,QAAxB;AACH;;AAEDlB,IAAAA,QAAQ,CAACmB,GAAT,CAAa,UAAb,EAAyB;AAACC,MAAAA,OAAO,EAAG;AAACC,QAAAA,aAAa,mBAAYP,GAAZ;AAAd;AAAX,KAAzB,EAAuEQ,IAAvE,CAA4EC,GAAG,IAAI;AAC/EX,MAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACDD,MAAAA,OAAO,CAACC,GAAR,CAAYU,GAAZ;AACA,WAAKf,KAAL,CAAWC,IAAX,GAAkBc,GAAG,CAACC,IAAJ,CAASC,QAAT,CAAkBC,GAApC;AACAX,MAAAA,YAAY,CAACY,QAAb,GAAwBJ,GAAG,CAACC,IAAJ,CAASC,QAAT,CAAkBC,GAAlB,CAAsBC,QAA9C;AACC,UAAIlB,IAAI,GAAGc,GAAG,CAACC,IAAJ,CAASC,QAAT,CAAkBC,GAA7B;AAEA,WAAKE,QAAL,CAAc;AAACnB,QAAAA,IAAI,EAACA;AAAN,OAAd;AAEA,UAAIoB,MAAM,GAAG3B,iBAAiB,CAACO,IAAD,EAAM,SAAN,CAA9B;AACAN,MAAAA,KAAK,CAAC2B,QAAN,CAAeD,MAAf,EAV+E,CAahF;AACA;AACF,KAfD,EAeGE,KAfH,CAeSC,GAAG,IAAG;AACXjB,MAAAA,YAAY,CAACkB,UAAb,CAAwB,UAAxB;AACA,WAAK1B,KAAL,CAAWU,OAAX,CAAmBC,IAAnB,CAAwB,QAAxB;AACH,KAlBD;AAoBA;;AAEDgB,EAAAA,MAAM,GAAE;AACJ;AAACtB,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAoB,KAAKL,KAAL,CAAWC,IAA/B;AAAqC;;AACtC,QAAG,KAAKD,KAAL,CAAWC,IAAX,KAAoBC,SAAvB,EAAiC;AAC7B,aACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BADA,CADJ;AAMH;;AAED,WACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACK,KAAKH,KAAL,CAAW4B,QADhB,CADJ;AAKH;;AArDuC;;AAwD5C,eAAelC,UAAU,CAACG,aAAD,CAAzB","sourcesContent":["import React from 'react';\r\nimport {instance} from '../utils/AxiosConfig';\r\nimport { withRouter } from \"react-router-dom\";\r\nimport {userActionCreator} from \"../redux/actionCreator/userAction\";\r\nimport { store } from \"../redux/store\";\r\n// import { mathActionCreator } from '../models/actionCreators/mathactioncreator';\r\n// import { store } from '../models/store';\r\n\r\n class AuthComponent extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state = {\r\n            user: undefined\r\n        }\r\n    }\r\n    componentWillMount (){\r\n        console.log(\"first\")\r\n     const jwt = localStorage.getItem('jwtToken');\r\n     if(!jwt){\r\n         this.props.history.push('/login');\r\n     }\r\n    \r\n     instance.get('/getUser', {headers : {Authorization: `Bearer ${jwt}`}}).then(res => {\r\n         console.log(\"and here Iam\");\r\n        console.log(res) ;\r\n        this.state.user = res.data.userdata.doc;\r\n        localStorage.username = res.data.userdata.doc.username;\r\n         var user = res.data.userdata.doc;\r\n        \r\n         this.setState({user:user});\r\n        \r\n         var action = userActionCreator(user,'AddUser');\r\n         store.dispatch(action);\r\n\r\n\r\n        //  var action = mathActionCreator(user,'+');\r\n        //  store.dispatch(action);\r\n     }).catch(err =>{\r\n         localStorage.removeItem('jwtToken');\r\n         this.props.history.push('/login');\r\n     });\r\n     \r\n    }\r\n\r\n    render(){\r\n        {console.log(\"hello\",this.state.user)}\r\n        if(this.state.user === undefined){\r\n            return(\r\n                <div>\r\n                <h1>loading..........</h1>\r\n            </div>\r\n            \r\n            )\r\n        }\r\n\r\n        return(\r\n            <div>\r\n                {this.props.children}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(AuthComponent);"]},"metadata":{},"sourceType":"module"}